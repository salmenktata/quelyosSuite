<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        <!-- Cron Job : Payouts Automatiques Designers Marketplace -->
        <record id="ir_cron_auto_designer_payouts" model="ir.cron">
            <field name="name">Payouts Automatiques Designers Marketplace</field>
            <field name="model_id" ref="model_quelyos_theme_designer"/>
            <field name="state">code</field>
            <field name="code">
# Déclencher payouts automatiques pour designers éligibles
# Critères : pending_balance >= 50 EUR + stripe_payouts_enabled
import requests
import logging
_logger = logging.getLogger(__name__)

try:
    base_url = env['ir.config_parameter'].sudo().get_param('web.base.url')
    url = f"{base_url}/api/themes/designers/payout/auto"
    response = requests.post(url, timeout=120)
    _logger.info(f"Auto payout cron executed: {response.status_code} - {response.text}")
except Exception as e:
    _logger.error(f"Auto payout cron error: {str(e)}")
            </field>
            <field name="interval_number">1</field>
            <field name="interval_type">months</field>
            <field name="active" eval="False"/>
            <field name="priority">10</field>
        </record>
    </data>
</odoo>
