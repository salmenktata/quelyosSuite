<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">

        <!-- ═══════════════════════════════════════════════════════════════
             LEGACY PLANS — Désactivés, remplacés par seed_plans.xml
             (système modulaire : module, solution, user_pack, enterprise)
        ═══════════════════════════════════════════════════════════════ -->

        <!-- Plan Suite Starter (legacy — désactivé) -->
        <record id="plan_starter" model="quelyos.subscription.plan">
            <field name="name">Starter (legacy)</field>
            <field name="code">suite_starter</field>
            <field name="plan_type">module</field>
            <field name="price_monthly">19.0</field>
            <field name="price_yearly">171.0</field>
            <field name="original_price">49.0</field>
            <field name="yearly_discount_pct">25</field>
            <field name="max_users">3</field>
            <field name="max_products">0</field>
            <field name="max_orders_per_year">0</field>
            <field name="trial_days">30</field>
            <field name="support_level">email_48h</field>
            <field name="description">Tout pour bien démarrer</field>
            <field name="is_popular" eval="False"/>
            <field name="is_default" eval="False"/>
            <field name="display_order">30</field>
            <field name="active" eval="False"/>
            <field name="icon_name">Layers</field>
            <field name="color_theme">emerald</field>
            <field name="features_marketing">[]</field>
            <field name="features">[]</field>
            <field name="group_ids" eval="[(6, 0, [
                ref('group_quelyos_home_user'),
                ref('group_quelyos_store_user')
            ])]"/>
        </record>

        <!-- Plan Suite Business (legacy — désactivé) -->
        <record id="plan_pro" model="quelyos.subscription.plan">
            <field name="name">Business (legacy)</field>
            <field name="code">suite_business</field>
            <field name="plan_type">solution</field>
            <field name="price_monthly">49.0</field>
            <field name="price_yearly">441.0</field>
            <field name="original_price">99.0</field>
            <field name="yearly_discount_pct">25</field>
            <field name="max_users">10</field>
            <field name="max_products">0</field>
            <field name="max_orders_per_year">0</field>
            <field name="trial_days">30</field>
            <field name="support_level">email_chat_24h</field>
            <field name="description">L&apos;ERP complet pour les PME ambitieuses</field>
            <field name="is_popular" eval="False"/>
            <field name="is_default" eval="False"/>
            <field name="display_order">20</field>
            <field name="active" eval="False"/>
            <field name="icon_name">Rocket</field>
            <field name="color_theme">indigo</field>
            <field name="features_marketing">[]</field>
            <field name="features">[]</field>
            <field name="group_ids" eval="[(6, 0, [
                ref('group_quelyos_home_user'),
                ref('group_quelyos_store_user'),
                ref('group_quelyos_stock_user'),
                ref('group_quelyos_crm_user'),
                ref('group_quelyos_marketing_user'),
                ref('group_quelyos_finance_user')
            ])]"/>
        </record>

        <!-- Plan Suite Enterprise (legacy — désactivé) -->
        <record id="plan_enterprise" model="quelyos.subscription.plan">
            <field name="name">Enterprise (legacy)</field>
            <field name="code">suite_enterprise</field>
            <field name="plan_type">enterprise</field>
            <field name="price_monthly">0.0</field>
            <field name="price_yearly">0.0</field>
            <field name="original_price">0</field>
            <field name="yearly_discount_pct">0</field>
            <field name="max_users">0</field>
            <field name="max_products">0</field>
            <field name="max_orders_per_year">0</field>
            <field name="trial_days">0</field>
            <field name="support_level">dedicated_2h</field>
            <field name="description">Solution sur mesure, support d&#233;di&#233;</field>
            <field name="is_popular" eval="False"/>
            <field name="is_default" eval="False"/>
            <field name="display_order">10</field>
            <field name="active" eval="False"/>
            <field name="icon_name">Crown</field>
            <field name="color_theme">amber</field>
            <field name="features_marketing">[]</field>
            <field name="features">[]</field>
            <field name="group_ids" eval="[(6, 0, [
                ref('group_quelyos_home_manager'),
                ref('group_quelyos_store_manager'),
                ref('group_quelyos_stock_manager'),
                ref('group_quelyos_crm_manager'),
                ref('group_quelyos_marketing_manager'),
                ref('group_quelyos_finance_manager'),
                ref('group_quelyos_hr_manager'),
                ref('group_quelyos_pos_manager'),
                ref('group_quelyos_maintenance_manager')
            ])]"/>
        </record>

        <!-- Séquence pour les références d'abonnement -->
        <record id="seq_subscription" model="ir.sequence">
            <field name="name">Subscription Reference</field>
            <field name="code">subscription</field>
            <field name="prefix">SUB-</field>
            <field name="padding">5</field>
            <field name="number_next">1</field>
            <field name="number_increment">1</field>
        </record>

        <!-- Cron job : Vérifier expiration des essais (quotidien à 1h) -->
        <record id="cron_check_trial_expiry" model="ir.cron">
            <field name="name">Check Trial Expiry</field>
            <field name="model_id" ref="model_quelyos_subscription"/>
            <field name="state">code</field>
            <field name="code">model._cron_check_trial_expiry()</field>
            <field name="interval_number">1</field>
            <field name="interval_type">days</field>
            <field name="active" eval="True"/>
        </record>

        <!-- Cron job : Vérifier quotas et envoyer alertes (quotidien à 2h) -->
        <record id="cron_check_quota_warnings" model="ir.cron">
            <field name="name">Check Quota Warnings</field>
            <field name="model_id" ref="model_quelyos_subscription"/>
            <field name="state">code</field>
            <field name="code">model._cron_check_quota_warnings()</field>
            <field name="interval_number">1</field>
            <field name="interval_type">days</field>
            <field name="active" eval="True"/>
        </record>

    </data>
</odoo>
